<!doctype html><html lang=ja><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=utf-8><meta name=generator content="Hugo 0.82.0"><meta name=theme-color content="#16171d"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><title>Criteriumはevalのベンチマークには使えない | Uninterned Days</title><link rel=stylesheet href=/css/meme.min.7dadf4be3fa27c7f5d57d612a4158ffaa65b2d2d9025b3c2e026ce7ad7b0ba0d.css><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js defer></script><script src=/js/meme.min.70f5e1ad45bb576583fd02203a2d70d659af0fd4aee35b38de4f80ac6359ae1f.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Comfortaa:wght@700&display=swap" media=print onload="this.media='all'"><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,700;1,400;1,700&family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Comfortaa:wght@700&display=swap"></noscript><meta name=author content="athos"><meta name=description content="ほとんどの人にとっては誰得情報かと思いますが。。。
Criteriumといえば、Clojure界隈ではベンチマークツールの決定版的な位置づけのライブラリ。 外れ値の検出等の統計的な処理はもちろん、ベンチマーク結果がGCの影響を受けないようにGCをオフにしたり、JITコンパイルによってコードが 十分に最適化された状態になるまでウォームアップをしてくれたりと、JVM上でベンチマークをとるうえで気をつける必要がある点について かなりしっかりとケアしてくれる。
で、今回の問題はそんな手厚いケアがアダになったケースといえそう。
…"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="Uninterned Days"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="Uninterned Days"><meta name=msapplication-starturl content="../../../../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../../../../icons/mstile-150x150.png"><meta name=google-site-verification content="TjBfD8QhH8eFFoFXVu9BjbOCsxk_-EEWvHi3PFYSw_4"><link rel=manifest href=/manifest.json><link rel=canonical href=https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2017-07-05T09:59:06+09:00","dateModified":"2017-07-05T09:59:06+09:00","url":"https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/","headline":"Criteriumはevalのベンチマークには使えない","description":"ほとんどの人にとっては誰得情報かと思いますが。。。\nCriteriumといえば、Clojure界隈ではベンチマークツールの決定版的な位置づけのライブラリ。 外れ値の検出等の統計的な処理はもちろん、ベンチマーク結果がGCの影響を受けないようにGCをオフにしたり、JITコンパイルによってコードが 十分に最適化された状態になるまでウォームアップをしてくれたりと、JVM上でベンチマークをとるうえで気をつける必要がある点について かなりしっかりとケアしてくれる。\nで、今回の問題はそんな手厚いケアがアダになったケースといえそう。\n…","inLanguage":"ja","articleSection":"post","wordCount":1416,"image":"https://athos.github.io/images/DontCount.png","author":{"@type":"Person","email":"athos0220@gmail.com","image":"https://athos.github.io/images/DontCount.png","url":"https://github.com/athos","name":"athos"},"publisher":{"@type":"Organization","name":"Uninterned Days","logo":{"@type":"ImageObject","url":"https://athos.github.io/images/DontCount.png"},"url":"https://athos.github.io/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://athos.github.io/"}}</script><meta name=twitter:card content="summary"><meta name=twitter:site content="@athos0220"><meta name=twitter:creator content="@athos0220"><meta property="og:title" content="Criteriumはevalのベンチマークには使えない"><meta property="og:description" content="ほとんどの人にとっては誰得情報かと思いますが。。。
Criteriumといえば、Clojure界隈ではベンチマークツールの決定版的な位置づけのライブラリ。 外れ値の検出等の統計的な処理はもちろん、ベンチマーク結果がGCの影響を受けないようにGCをオフにしたり、JITコンパイルによってコードが 十分に最適化された状態になるまでウォームアップをしてくれたりと、JVM上でベンチマークをとるうえで気をつける必要がある点について かなりしっかりとケアしてくれる。
で、今回の問題はそんな手厚いケアがアダになったケースといえそう。
…"><meta property="og:url" content="https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/"><meta property="og:site_name" content="Uninterned Days"><meta property="og:locale" content="en"><meta property="og:image" content="https://athos.github.io/images/DontCount.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2017-07-05T09:59:06+09:00"><meta property="article:modified_time" content="2017-07-05T09:59:06+09:00"><meta property="article:section" content="post"><script data-goatcounter=https://athos.goatcounter.com/count async src=//gc.zgo.at/count.js></script></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>Uninterned Days</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/post/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>Posts</span></a></li><li class=menu-item><a href=/categories><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255.0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255.0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256.0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255.0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256.0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255.0-24 10.745-24 24zm386.667-56H488c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255.0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255.0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255.0-24 10.745-24 24z"/></svg><span class=menu-item-name>Categories</span></a></li><li class=menu-item><a href=/tags/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>Tags</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li><li class="menu-item search-item"><form id=search class=search role=search><label for=search-input><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon search-icon"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></label><input type=search id=search-input class=search-input></form><template id=search-result hidden><article class="content post"><h2 class=post-title><a class=summary-title-link></a></h2><summary class=summary></summary><div class=read-more-container><a class=read-more-link>Read More »</a></div></article></template></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label><label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=default data-type=post data-toc-num=true><h1 class="post-title p-name">Criteriumはevalのベンチマークには使えない</h1><div class=post-meta><time datetime=2017-07-05T09:59:06+09:00 class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2017.7.5</time>
<span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href=/categories/tech/ class="category-link p-category">tech</a>/<a href=/categories/programming/ class="category-link p-category">programming</a></span>
<span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;3&nbsp;mins</span></div><div class="post-body e-content"><p>ほとんどの人にとっては誰得情報かと思いますが。。。</p><p><a href=https://github.com/hugoduncan/criterium target=_blank rel=noopener>Criterium</a>といえば、Clojure界隈ではベンチマークツールの決定版的な位置づけのライブラリ。
外れ値の検出等の統計的な処理はもちろん、ベンチマーク結果がGCの影響を受けないようにGCをオフにしたり、JITコンパイルによってコードが
十分に最適化された状態になるまでウォームアップをしてくれたりと、JVM上でベンチマークをとるうえで気をつける必要がある点について
かなりしっかりとケアしてくれる。</p><p>で、今回の問題はそんな手厚いケアがアダになったケースといえそう。</p><p>今やっていたのは、「一般的には<code>eval</code>が必要になるが条件が揃うと<code>eval</code>する必要がある部分を大幅に(もしくは完全に)削減できる」
という問題に対して、その対策になるようなライブラリを作ったらナイーブに<code>eval</code>を呼ぶ場合と比較してどれくらい速くなるのか、というのを
ひとまずプロトタイプを作ってベンチマークをとってみるということ。</p><p>まず、ライブラリ側のコードをベンチマークしてみる。小さいサイズの入力について、理想的な条件が揃う場合には<code>eval</code>なしに直接実行しているのと
ほとんど遜色ないくらいの速度が出る。目論見どおり。</p><p>次に<code>eval</code>を使ったコードの場合。ライブラリと同じようベンチマークを始める。</p><p>…待てども待てどもベンチマークが全然終わらない。</p><p>Criteriumはベンチマークするコードを何回も繰り返して実行時間のサンプルをとるので結果が出るまでに多少がかかるのだけど、最初に
1回あたりの実行時間を計測してうえで何回ベンチマークコードを実行するのかを見積もるので、(ベンチマークコード1回の実行が延々かかる
ということでもなければ)ベンチマークが終わらないということはないはず。</p><p>何かがおかしい。</p><p>そこで、このベンチマークをとっている間にCriterium内部で何が起こっているのか調べるために <code>with-progress-reporting</code> をつけて
進捗を報告してもらう。</p><pre><code>Warming up for JIT optimisations 5000000000 ...                                 
  classes loaded before 1 iterations                                            
  classes loaded before 434 iterations                                          
  compilation occurred before 434 iterations                                    
  classes loaded before 867 iterations                                          
  classes loaded before 1300 iterations                                         
  classes loaded before 1733 iterations                                         
  classes loaded before 2166 iterations 
  classes loaded before 2599 iterations 
  classes loaded before 3032 iterations 
  classes loaded before 3465 iterations 
  classes loaded before 3898 iterations 
  classes loaded before 4331 iterations 
  classes loaded before 4764 iterations 
  classes loaded before 5197 iterations 
  classes loaded before 5630 iterations 
  classes loaded before 6063 iterations
  ...
</code></pre><p>この &ldquo;classes loaded before &mldr; iterations&rdquo; の行が延々と続く。なぜ？</p><p>Criteriumのコードを読むと、この行は要するにクラスロードが新たに生じるうちはJITコンパイルが安定した状態にないと判断して
ウォームアップを続けていることを表しているようだ。</p><p>Clojureのコードは通常(AOTコンパイルされていなければ)実行時にコンパイルされ、JVMバイトコードが生成される。
つまり、そのタイミングで新たにクラスが生成され、ロードされる。ただし、同一の関数は一度コンパイルされてしまえば、
その後何度呼び出してもクラスが新たに生成されることはない。Criteriumはベンチマークコードを関数にくるんで実行するので、この点について問題はない。</p><p>しかし、<code>eval</code>を使った場合は別だ。<code>eval</code>を使うと、<code>eval</code>を呼び出した時点でコンパイルが走り、バイトコードが生成され、クラスがロードされる。
<code>eval</code>を呼び出すたびにクラスがロードされるので、Criteriumのウォームアップはいつまでも終わらない。</p><p>この現象は<code>eval</code>の呼び出し以外では意図的にクラスロードするようなコードでしか発生しないので大半の人は遭遇しないだろうけど、
なかなか思い当たらない意外な落とし穴なので注意したい。</p></div></article><div class=updated-badge-container><span title="Updated @ 2017-07-05 09:59:06 +0900" style=cursor:help><svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2017-07-05</text><text x="915" y="140" textLength="650" transform="scale(.1)">2017-07-05</text></g></svg></span></div><div class=post-share><div class=share-items><div class="share-item twitter"><a href="https://twitter.com/share?url=https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/&text=Criterium%e3%81%afeval%e3%81%ae%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af%e3%81%ab%e3%81%af%e4%bd%bf%e3%81%88%e3%81%aa%e3%81%84&hashtags=TIL,Clojure,&via=athos0220" title="Share on Twitter" target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon twitter-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a></div><div class="share-item facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/&hashtag=%23TIL" title="Share on Facebook" target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon facebook-icon"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></a></div><div class="share-item linkedin"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://athos.github.io/post/2017/07/05/criterium-cannot-be-used-for-benchmarking-eval/&title=Criterium%e3%81%afeval%e3%81%ae%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af%e3%81%ab%e3%81%af%e4%bd%bf%e3%81%88%e3%81%aa%e3%81%84&summary=%e3%81%bb%e3%81%a8%e3%82%93%e3%81%a9%e3%81%ae%e4%ba%ba%e3%81%ab%e3%81%a8%e3%81%a3%e3%81%a6%e3%81%af%e8%aa%b0%e5%be%97%e6%83%85%e5%a0%b1%e3%81%8b%e3%81%a8%e6%80%9d%e3%81%84%e3%81%be%e3%81%99%e3%81%8c%e3%80%82%e3%80%82%e3%80%82%0aCriterium%e3%81%a8%e3%81%84%e3%81%88%e3%81%b0%e3%80%81Clojure%e7%95%8c%e9%9a%88%e3%81%a7%e3%81%af%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af%e3%83%84%e3%83%bc%e3%83%ab%e3%81%ae%e6%b1%ba%e5%ae%9a%e7%89%88%e7%9a%84%e3%81%aa%e4%bd%8d%e7%bd%ae%e3%81%a5%e3%81%91%e3%81%ae%e3%83%a9%e3%82%a4%e3%83%96%e3%83%a9%e3%83%aa%e3%80%82%20%e5%a4%96%e3%82%8c%e5%80%a4%e3%81%ae%e6%a4%9c%e5%87%ba%e7%ad%89%e3%81%ae%e7%b5%b1%e8%a8%88%e7%9a%84%e3%81%aa%e5%87%a6%e7%90%86%e3%81%af%e3%82%82%e3%81%a1%e3%82%8d%e3%82%93%e3%80%81%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af%e7%b5%90%e6%9e%9c%e3%81%8cGC%e3%81%ae%e5%bd%b1%e9%9f%bf%e3%82%92%e5%8f%97%e3%81%91%e3%81%aa%e3%81%84%e3%82%88%e3%81%86%e3%81%abGC%e3%82%92%e3%82%aa%e3%83%95%e3%81%ab%e3%81%97%e3%81%9f%e3%82%8a%e3%80%81JIT%e3%82%b3%e3%83%b3%e3%83%91%e3%82%a4%e3%83%ab%e3%81%ab%e3%82%88%e3%81%a3%e3%81%a6%e3%82%b3%e3%83%bc%e3%83%89%e3%81%8c%20%e5%8d%81%e5%88%86%e3%81%ab%e6%9c%80%e9%81%a9%e5%8c%96%e3%81%95%e3%82%8c%e3%81%9f%e7%8a%b6%e6%85%8b%e3%81%ab%e3%81%aa%e3%82%8b%e3%81%be%e3%81%a7%e3%82%a6%e3%82%a9%e3%83%bc%e3%83%a0%e3%82%a2%e3%83%83%e3%83%97%e3%82%92%e3%81%97%e3%81%a6%e3%81%8f%e3%82%8c%e3%81%9f%e3%82%8a%e3%81%a8%e3%80%81JVM%e4%b8%8a%e3%81%a7%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af%e3%82%92%e3%81%a8%e3%82%8b%e3%81%86%e3%81%88%e3%81%a7%e6%b0%97%e3%82%92%e3%81%a4%e3%81%91%e3%82%8b%e5%bf%85%e8%a6%81%e3%81%8c%e3%81%82%e3%82%8b%e7%82%b9%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6%20%e3%81%8b%e3%81%aa%e3%82%8a%e3%81%97%e3%81%a3%e3%81%8b%e3%82%8a%e3%81%a8%e3%82%b1%e3%82%a2%e3%81%97%e3%81%a6%e3%81%8f%e3%82%8c%e3%82%8b%e3%80%82%0a%e3%81%a7%e3%80%81%e4%bb%8a%e5%9b%9e%e3%81%ae%e5%95%8f%e9%a1%8c%e3%81%af%e3%81%9d%e3%82%93%e3%81%aa%e6%89%8b%e5%8e%9a%e3%81%84%e3%82%b1%e3%82%a2%e3%81%8c%e3%82%a2%e3%83%80%e3%81%ab%e3%81%aa%e3%81%a3%e3%81%9f%e3%82%b1%e3%83%bc%e3%82%b9%e3%81%a8%e3%81%84%e3%81%88%e3%81%9d%e3%81%86%e3%80%82%0a%e2%80%a6&source=Uninterned%20Days" title="Share on LinkedIn" target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon linkedin-icon"><path d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></a></div></div></div><div class=related-posts><h2 class=related-title>See Also:<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/post/2017/06/03/clojars-query-for-search-by-created-date/ class=related-link>Clojarsの検索APIでライブラリ登録日によるフィルタリング</a></li><li class=related-item><a href=/post/2016/06/21/transformations-between-combinations-of-associative-fns/ class=related-link>Associativeな値の操作関数の等価な書き換え</a></li><li class=related-item><a href=/post/2016/05/17/name-function-can-accept-strings/ class=related-link>name関数は文字列を受け取る</a></li><li class=related-item><a href=/post/2017/06/24/getting-started-with-clojurescript-development/ class=related-link>ClojureScript自身の開発のはじめかた</a></li><li class=related-item><a href=/post/2016/05/18/embed-unescaped-html-into-reagent-dom/ class=related-link>ReagentでエスケープされていないHTMLを埋め込む</a></li></ul></div><div class=post-tags><a href=/tags/til/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>TIL</a>
<a href=/tags/clojure/ rel=tag class=post-tags-link><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>Clojure</a></div><ul class=post-nav><li class=post-nav-prev><a href=/post/2017/08/03/specing-maps-with-exclusive-keys/ rel=prev>&lt; 「2つのキーのどちらか一方のみを含むマップ」を表現するスペック</a></li><li class=post-nav-next><a href=/post/2017/06/24/getting-started-with-clojurescript-development/ rel=next>ClojureScript自身の開発のはじめかた ></a></li></ul><div id=utterances></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>©&nbsp;2021&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;athos</div><div class=powered-by>Powered by <a href=https://github.com/gohugoio/hugo target=_blank rel=noopener>Hugo</a> | Theme is <a href=https://github.com/reuixiy/hugo-theme-meme target=_blank rel=noopener>MemE</a></div><ul class=socials><li class=socials-item><a href=/rss.xml target=_blank rel="external noopener" title=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li><li class=socials-item><a href=https://github.com/athos target=_blank rel="external noopener" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li><li class=socials-item><a href=https://twitter.com/athos0220 target=_blank rel="external noopener" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></a></li></ul></div></footer></div><script>function loadComments(){(function(){var b=document.getElementById("utterances"),a=document.createElement('script');a.src='https://utteranc.es/client.js',a.async=!0,a.crossOrigin='anonymous',a.setAttribute('repo','athos/athos.github.io'),a.setAttribute('issue-term','pathname');const c=getCurrentTheme()==='dark';c?a.setAttribute('theme','photon-dark'):a.setAttribute('theme','github-light'),a.setAttribute('label','comment'),b.appendChild(a)})()}</script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script><script>mediumZoom(document.querySelectorAll('div.post-body img'),{background:'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>